## ebuild Writing
{% include note.md note1="This section is for advanced users (or those that are interested in attaining this level of understanding) and is mostly based on the [official ebuild writing guide](https://devmanual.gentoo.org/)." %}
**ebuild writing** and **testing** are two of the most important, yet difficult activities for Gentoo developers to do. Efficient ebuild writing requires a good knowledge of [Bash scripting](/2015/11/26/bash-scripting-and-the-command-line-an-introduction-for-sabayon-users/), which I do not even possess, so bare with me. ebuilds can contain traditional Bash functions and calls to standard POSIX utilities (such as `cp` or `mv`), as well as specialized ebuild functions, ebuild variables and code snippets. **eclasses** (which are included into an ebuild by a line that starts with `inherit`) can add extra functions, variables and code snippets to ebuilds. If you are interested in writing ebuilds I recommend you install `app-portage/eclass-manpages` with Entropy by running: {% include coders.html line1="equo i app-portage/eclass-manpages" %} as this will add manpages (and additional documentation) for the various eclasses to your system. To list the eclass manpages installed with this package, run (assumming you have the [Gentoolkit](#gentoolkit) installed): {% include codeus-fs.html line1="equery files app-portage/eclass-manpages | grep /usr/share/man" %}

ebuilds are so varied in their contents and structure that it is difficult for me to find a reasonable example with which to teach their general structure. This is partly because many ebuilds have components that are specific to them and take up so much space that I do not wish to include them here. This is probably the best ebuild example I can provide (which is in the Portage Tree):
{% gist e15dd0c93ff92731f64a %}
The header in lines one to three is common to all ebuilds, with the date `1999-2015` being adjusted every new year (e.g., in 2016 it will be adjusted to `1999-2016`). Lines 5, 8-10, 12-15, 17-21 are where ebuild variables are being defined. They (and other allowed variables) are explained in **table 8**. Table 8 and 9 are essentially modified versions of table present in the [Gentoo Development Guide](https://devmanual.gentoo.org/ebuild-writing/variables/index.html).

{% include PMS/table8-ebuild-variables.html %}
The sixth line, `inherit eutils games`, is where eclass functions are inherited (inheriting means makes them available to the ebuild). Certain eclasses make extra ebuild-specified variables available for use. For example, the [`git-r3`](/man/git-r3.eclass.5.html) eclass allows for the specification of a `EGIT_REPO_URI` variable, which is essentially the same as a `SRC_URI` field, except it is for a git repository instead. **Table 9** describes variables that are predefined read-only in nature (that is, they are **not** set in ebuilds, although they can be used in ebuilds).
{% include PMS/table9-ebuild-variables.html %}

ebuilds also contain their own set of functions, that are specified in **table 10**.
{% include PMS/table10-ebuild-functions.html %}
